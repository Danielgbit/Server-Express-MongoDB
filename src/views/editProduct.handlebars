<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Editar Producto</title>
</head>
<body>
    <h1>Editar Producto</h1>
    <form id="editProductForm">
        <label for="editTitle">Título:</label>
        <input type="text" id="editTitle" name="title" value="{{product.title}}" required>
        
        <label for="editPrice">Precio:</label>
        <input type="number" id="editPrice" name="price" value="{{product.price}}" required>
        
        <label for="editDescription">Descripción:</label>
        <textarea id="editDescription" name="description" required>{{product.description}}</textarea>
        
        <button type="submit">Guardar Cambios</button>
    </form>
    <a href="/realtimeproducts">Volver a la lista de productos</a>

    <script src="/socket.io/socket.io.js"></script>
    <script>
        const socket = io();

        // Manejar el envío del formulario de edición
        document.getElementById("editProductForm").addEventListener("submit", (event) => {
            event.preventDefault();

            const updatedProduct = {
                id: "{{product.id}}", // ID del producto
                title: document.getElementById("editTitle").value,
                price: document.getElementById("editPrice").value,
                description: document.getElementById("editDescription").value,
            };

            // Enviar los datos actualizados al servidor
            socket.emit("editProduct", updatedProduct);

            // Redirigir a la lista de productos después de actualizar
            window.location.href = "/realtimeproducts";
        });
    </script>
</body>
</html>